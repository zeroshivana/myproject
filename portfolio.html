import React, { useState } from 'react';
import { ExternalLink, Code, Gamepad2, Wrench, Trophy, Clock, Zap, Target, Heart, Layout, Github, Linkedin, Mail, CheckCircle, FileText, Calculator, MousePointer2, Printer, Table, School, Box, Grid3x3, RefreshCcw, FileDown, Palette, BrainCircuit, Users, Cuboid } from 'lucide-react';

const initialProjects = [
  // --- 生產力工具 (Tools) ---
  {
    id: 1,
    type: 'tool',
    title: "Adobe 軟體採購規格生成器",
    description: "專為政府教育單位設計，一鍵生成合規的軟體採購硬體規格書。",
    link: "https://adbeweblink.github.io/myproject/adbespec2026.html",
    tags: ["Vanilla JS", "Automation", "GovTech"],
    purpose: "自動產出合規標案規格文件，避免人為失誤。",
    problemSolved: "解決人工查閱數十款軟體規格耗時易錯痛點。",
    efficiency: "撰寫時間從數小時縮短至30秒，準確率100%。"
  },
  {
    id: 2,
    type: 'tool',
    title: "Adobe Firefly 點數計算機",
    description: "整合官方與第三方模型費率，精準預估每月 AI 算力成本與額度。",
    link: "https://adbeweblink.github.io/myproject/aipointcalculator.html",
    tags: ["JavaScript", "Cost Analysis", "UI/UX"],
    purpose: "協助團隊精算生成式 AI 的每月點數消耗預算。",
    problemSolved: "解決不同模型解析度與幀率計費複雜難算困擾。",
    efficiency: "內建動態購物車試算，三分鐘內完成年度預算表。"
  },
  {
    id: 10,
    type: 'tool',
    title: "Adobe CC 最新功能電子報",
    description: "針對 A4 列印優化的功能快報，前端即時生成 PDF，資訊零時差。",
    link: "https://adbeweblink.github.io/myproject/newfeatures.html",
    tags: ["html2pdf.js", "Print CSS", "RWD"],
    purpose: "提供一鍵生成 PDF 的功能週報，資訊傳遞標準化。",
    problemSolved: "克服網頁轉存 PDF 常見的破版與排版錯亂問題。",
    efficiency: "無需後端，前端即時渲染列印級高解析度文件。"
  },
  {
    id: 13,
    type: 'tool',
    title: "Adobe 台灣經銷商搜尋器",
    description: "整合全台經銷商資料庫，支援地區與專業領域篩選，快速媒合廠商。",
    link: "https://adbeweblink.github.io/myproject/reseller.html",
    tags: ["Vanilla JS", "Real-time Filtering", "RWD"],
    purpose: "建立透明的經銷商名錄，快速找到在地服務窗口。",
    problemSolved: "解決官方列表缺乏在地篩選與專業標籤資訊落差。",
    efficiency: "即時關鍵字過濾，將廠商搜尋時間縮短至數秒鐘。"
  },
  {
    id: 4,
    type: 'tool',
    title: "Adobe 企業方案規格比較",
    description: "專為 B2B 銷售設計，針對橫式列印優化，清晰呈現團隊與企業版差異。",
    link: "https://adbeweblink.github.io/myproject/cc-biz-matrix.html",
    tags: ["Print CSS", "Serverless", "Tailwind"],
    purpose: "協助企業客戶快速釐清團隊版與企業版功能差異。",
    problemSolved: "解決複雜授權權益與資安規範難以一目了然問題。",
    efficiency: "整合 Serverless 詢價表單，自動化收集潛在商機。"
  },
  {
    id: 5,
    type: 'tool',
    title: "Adobe 教育授權方案比較",
    description: "專為校園採購設計，深度解析裝置授權與指名授權差異，適合校務提案。",
    link: "https://adbeweblink.github.io/myproject/cc-edu-matrix.html",
    tags: ["Print CSS", "Serverless", "Tailwind"],
    purpose: "協助學校單位釐清裝置授權與指名授權權益差異。",
    problemSolved: "解決電腦教室與教職員 BYOD 環境授權選擇難題。",
    efficiency: "提供清晰的 A4 列印版面，大幅縮短溝通成本。"
  },
  {
    id: 6,
    type: 'tool',
    title: "Firefly 點數方案比較表",
    description: "支援獨立訂閱與加購包切換，協助企業精算 AI 算力成本與版權權益。",
    link: "https://adbeweblink.github.io/myproject/firefly-biz-matrix.html",
    tags: ["Print CSS", "Google Apps Script", "Cost"],
    purpose: "協助高用量創作者釐清點數消耗規則與加購差異。",
    problemSolved: "解決企業對點數重置規則與商用版權保障資訊焦慮。",
    efficiency: "將複雜的 AI 計費邏輯視覺化，加速採購決策流程。"
  },

  // --- 互動小遊戲 (Games) ---
  {
    id: 14,
    type: 'game',
    title: "奧多比轉轉樂",
    description: "基於 Three.js 的 3D 魔術方塊，將軟體圖示映射至六面，考驗空間邏輯。",
    link: "https://adbeweblink.github.io/myproject/twist.html",
    tags: ["Three.js", "WebGL", "3D Logic"],
    appeal: "將品牌圖示與經典魔術方塊結合，強化產品印象。",
    stickiness: "競速解謎玩法具極高重玩性，內建計時與排行榜。",
    features: "WebGL 3D 渲染、四元數旋轉運算、觸控滑鼠雙支援。"
  },
  {
    id: 7,
    type: 'game',
    title: "奧多比跳跳樂",
    description: "基於 Three.js 的 3D 蓄力跳躍，玩家需控制角色在軟體積木間精準跳躍。",
    link: "https://adbeweblink.github.io/myproject/jump.html",
    tags: ["Three.js", "Physics", "Particle"],
    appeal: "透過沉浸式 3D 互動，建立使用者對品牌色的認知。",
    stickiness: "結合蓄力手感與連擊加分機制，大幅提升重玩意願。",
    features: "正交投影相機運鏡、物理拋物線模擬、粒子特效系統。"
  },
  {
    id: 9,
    type: 'game',
    title: "奧多比合合樂",
    description: "類西瓜遊戲的物理合成玩法，利用碰撞機制將低階圖示進化為高階圖示。",
    link: "https://adbeweblink.github.io/myproject/merge.html",
    tags: ["Matter.js", "2D Physics", "Canvas"],
    appeal: "結合合成快感與物理不確定性，延長使用者互動時間。",
    stickiness: "隨機生成的炸彈道具與危險模式，增加變數與張力。",
    features: "Matter.js 物理引擎、動態碰撞判定、危險區域特效。"
  },
  {
    id: 3,
    type: 'game',
    title: "奧多比碰碰樂",
    description: "經典 2048 玩法，滑動合併圖示，從 Acrobat 一路進化至 Creative Cloud。",
    link: "https://adbeweblink.github.io/myproject/bump.html",
    tags: ["Game Logic", "Web Audio API"],
    appeal: "將枯燥的產品列表轉化為趣味進化，潛移默化品牌記憶。",
    stickiness: "內建進化圖鑑收集與積分排行榜，有效延長遊玩時間。",
    features: "原生 Web Audio 音效、手勢滑動操作、戰績保存機制。"
  },
  {
    id: 8,
    type: 'game',
    title: "奧多比消消樂",
    description: "結合 LINE 生態圈的消除遊戲，遊玩中置入軟體冷知識，達到寓教於樂。",
    link: "https://adbeweblink.github.io/myproject/matchBox.html",
    tags: ["Match-3", "LINE LIFF", "Gamification"],
    appeal: "將品牌圖示轉化為遊戲元素，置入實用軟體快捷鍵教學。",
    stickiness: "具備連擊視覺回饋與好友分享功能，激發社群競爭心理。",
    features: "LINE LIFF 整合、Web Audio 音效、RWD 觸控優化。"
  },
  {
    id: 11,
    type: 'game',
    title: "Pantone 色彩極限挑戰",
    description: "考驗色彩敏銳度，找出差異色塊。失敗時透過學習年度代表色獲得復活。",
    link: "https://adbeweblink.github.io/myproject/pantone.html",
    tags: ["Color Theory", "Gamification"],
    appeal: "結合色彩學訓練與品牌科普，自然記住歷年年度代表色。",
    stickiness: "隨著關卡推進色差值指數級縮小，激發設計師好勝心。",
    features: "動態色差生成演算法、稱號系統、年度色資料庫百科。"
  },
  {
    id: 12,
    type: 'game',
    title: "Adobe 知識王挑戰賽",
    description: "結合 LINE LIFF 的問答遊戲，測試品牌知識，滿分可獲得專屬獎勵誘因。",
    link: "https://adbeweblink.github.io/myproject/quiz.html",
    tags: ["React", "LINE LIFF", "Quiz"],
    appeal: "將生硬產品知識轉化為挑戰賽，利用獎勵誘因提高參與度。",
    stickiness: "即時回饋解析與滿分彩帶特效，增強使用者成就感。",
    features: "React 互動介面、Canvas 慶祝特效、BotBonnie 串接。"
  }
];

const Portfolio = () => {
  const [filter, setFilter] = useState('tool');
  const [projects, setProjects] = useState(initialProjects);

  const filteredProjects = projects.filter(project => project.type === filter);

  // Theme configuration based on filter
  const theme = filter === 'tool' ? {
    bgMain: 'bg-slate-900',
    bgCard: 'bg-slate-800',
    borderCard: 'border-slate-700',
    textMain: 'text-slate-100',
    textSub: 'text-slate-400',
    accent: 'indigo', // for selection etc
    headerBg: 'bg-slate-950',
    headerBorder: 'border-slate-800',
    buttonActive: 'bg-blue-600 shadow-blue-500/30',
    buttonInactive: 'bg-slate-800 text-slate-400 hover:bg-slate-700',
    cardHoverBorder: 'hover:border-blue-500',
    iconHeader: 'text-blue-400/80',
    gradient: 'from-blue-900 to-slate-900',
    tagBg: 'bg-slate-900/50',
    tagText: 'text-slate-400',
    metricIcon1: 'text-blue-400',
    metricIcon2: 'text-yellow-400',
    metricIcon3: 'text-green-400',
    metricText3: 'text-green-300',
    actionBtn: 'bg-blue-600 hover:bg-blue-500 hover:shadow-blue-500/25'
  } : {
    // Game Theme: Darker Purple/Cyberpunk vibe
    bgMain: 'bg-[#0f0518]', 
    bgCard: 'bg-[#1a0b2e]',
    borderCard: 'border-[#2d1b4e]',
    textMain: 'text-fuchsia-50',
    textSub: 'text-fuchsia-200/60',
    accent: 'fuchsia',
    headerBg: 'bg-[#0a0310]',
    headerBorder: 'border-[#2d1b4e]',
    buttonActive: 'bg-fuchsia-600 shadow-fuchsia-500/30 text-white',
    buttonInactive: 'bg-[#1a0b2e] text-fuchsia-200/40 hover:bg-[#2d1b4e]',
    cardHoverBorder: 'hover:border-fuchsia-500',
    iconHeader: 'text-fuchsia-400/80',
    gradient: 'from-purple-900/40 to-[#1a0b2e]',
    tagBg: 'bg-[#0f0518]/50',
    tagText: 'text-fuchsia-200/50',
    metricIcon1: 'text-pink-400',
    metricIcon2: 'text-purple-400',
    metricIcon3: 'text-yellow-400',
    metricText3: 'text-yellow-200',
    actionBtn: 'bg-fuchsia-600 hover:bg-fuchsia-500 hover:shadow-fuchsia-500/25'
  };

  return (
    <div className={`min-h-screen ${theme.bgMain} ${theme.textMain} font-sans selection:bg-${theme.accent}-500 selection:text-white transition-colors duration-500`}>
      {/* Header */}
      <header className={`${theme.headerBg} border-b ${theme.headerBorder} sticky top-0 z-50 bg-opacity-90 backdrop-blur-sm transition-colors duration-500`}>
        <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
          <div className="flex items-center space-x-3">
            <div className={`p-2 rounded-lg ${filter === 'game' ? 'bg-fuchsia-500/10' : 'bg-indigo-500/10'}`}>
               <Layout className={`${filter === 'game' ? 'text-fuchsia-400' : 'text-indigo-400'} w-6 h-6`} />
            </div>
            <h1 className="text-xl font-bold tracking-tight">商業加速實驗室</h1>
          </div>
          <nav className="flex space-x-4">
            <a href="#" className={`hover:text-${theme.accent}-400 transition-colors`}><Github className="w-5 h-5" /></a>
            <a href="#" className={`hover:text-${theme.accent}-400 transition-colors`}><Linkedin className="w-5 h-5" /></a>
            <a href="#" className={`hover:text-${theme.accent}-400 transition-colors`}><Mail className="w-5 h-5" /></a>
          </nav>
        </div>
      </header>

      <main className="max-w-6xl mx-auto px-4 py-12">
        {/* Intro */}
        <section className="mb-16 text-center">
          <h2 className={`text-4xl md:text-5xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r ${filter === 'tool' ? 'from-indigo-400 to-cyan-400' : 'from-fuchsia-400 to-purple-400'}`}>
            {filter === 'tool' ? '企業級生產力工具' : '品牌互動遊戲體驗'}
          </h2>
          <p className={`${theme.textSub} max-w-2xl mx-auto text-lg leading-relaxed`}>
            {filter === 'tool' 
              ? "專注於解決商業流程中的痛點，提供自動化、標準化與資訊透明化的解決方案。" 
              : "將品牌元素轉化為沉浸式互動體驗，透過遊戲化機制提升使用者黏著度與品牌認知。"}
          </p>
        </section>

        {/* Filter Tabs */}
        <section className="mb-12 flex justify-center space-x-4">
          <button 
            onClick={() => setFilter('tool')}
            className={`px-8 py-3 rounded-full font-medium transition-all duration-300 flex items-center space-x-2 ${filter === 'tool' ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30 ring-2 ring-blue-400/20' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
          >
            <Wrench className="w-4 h-4" /> <span>生產力工具</span>
          </button>
          <button 
            onClick={() => setFilter('game')}
            className={`px-8 py-3 rounded-full font-medium transition-all duration-300 flex items-center space-x-2 ${filter === 'game' ? 'bg-fuchsia-600 text-white shadow-lg shadow-fuchsia-500/30 ring-2 ring-fuchsia-400/20' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
          >
            <Gamepad2 className="w-4 h-4" /> <span>互動小遊戲</span>
          </button>
        </section>

        {/* Projects Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {filteredProjects.map((project) => (
            <div key={project.id} className={`${theme.bgCard} rounded-xl overflow-hidden border ${theme.borderCard} ${theme.cardHoverBorder} transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 group flex flex-col`}>
              
              {/* Card Header */}
              <div className={`h-40 w-full flex items-center justify-center relative overflow-hidden bg-gradient-to-br ${theme.gradient}`}>
                 {/* Background Pattern */}
                 <div className="absolute inset-0 opacity-10">
                    <svg className="h-full w-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                      <path d="M0 100 L100 0 L100 100 Z" fill="currentColor" />
                    </svg>
                 </div>
                 
                 {/* Icon */}
                 <div className="z-10 transform group-hover:scale-110 transition-transform duration-500">
                   {project.title.includes('規格') ? <FileText className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('計算機') ? <Calculator className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('比較表') ? <Table className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('教育') ? <School className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('功能概覽') ? <FileDown className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('經銷商') ? <Users className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('跳跳樂') ? <Box className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('消消樂') ? <Grid3x3 className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('合合樂') ? <RefreshCcw className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('轉轉樂') ? <Cuboid className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('Pantone') ? <Palette className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    project.title.includes('知識王') ? <BrainCircuit className={`w-16 h-16 ${theme.iconHeader}`} /> :
                    <Gamepad2 className={`w-16 h-16 ${theme.iconHeader}`} />}
                 </div>
              </div>

              {/* Content */}
              <div className="p-6 flex-1 flex flex-col">
                
                {/* Action Button */}
                <a 
                  href={project.link} 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className={`w-full flex items-center justify-center space-x-2 text-white py-3 rounded-lg transition-all duration-300 font-bold mb-6 shadow-md ${theme.actionBtn}`}
                >
                  <ExternalLink className="w-4 h-4" />
                  <span>{project.type === 'tool' ? '開啟工具連結' : '開啟遊戲連結'}</span>
                </a>

                {/* Title & Badge */}
                <div className="flex justify-between items-start mb-3">
                  <div className="w-full">
                    <div className="flex justify-between items-center mb-2">
                       <span className={`text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider ${filter === 'tool' ? 'bg-blue-900/30 text-blue-300' : 'bg-fuchsia-900/30 text-fuchsia-300'}`}>
                        {project.type === 'tool' ? 'Utility' : 'Game'}
                      </span>
                    </div>
                    <h3 className={`text-lg font-bold group-hover:text-${filter === 'tool' ? 'blue' : 'fuchsia'}-400 transition-colors leading-snug line-clamp-1`}>{project.title}</h3>
                  </div>
                </div>

                <p className={`${theme.textSub} text-sm mb-6 leading-relaxed line-clamp-2 min-h-[2.5rem]`}>
                  {project.description}
                </p>

                {/* Metrics Grid (Aligned Heights) */}
                <div className={`mt-auto ${filter === 'tool' ? 'bg-slate-900/50 border-slate-800/50' : 'bg-[#130725] border-[#2d1b4e]'} rounded-lg p-4 space-y-4 mb-2 border`}>
                  {project.type === 'tool' ? (
                    <>
                      <div className="flex items-start space-x-3">
                        <Target className={`w-5 h-5 ${theme.metricIcon1} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>用途 / 目的</p>
                          <p className={`text-sm ${theme.textMain} leading-snug`}>{project.purpose}</p>
                        </div>
                      </div>
                      <div className="flex items-start space-x-3">
                        <CheckCircle className={`w-5 h-5 ${theme.metricIcon2} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>解決困難</p>
                          <p className={`text-sm ${theme.textMain} leading-snug`}>{project.problemSolved}</p>
                        </div>
                      </div>
                      <div className="flex items-start space-x-3">
                        <Zap className={`w-5 h-5 ${theme.metricIcon3} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>效率提升</p>
                          <p className={`text-sm font-bold ${theme.metricText3} leading-snug`}>{project.efficiency}</p>
                        </div>
                      </div>
                    </>
                  ) : (
                    <>
                       <div className="flex items-start space-x-3">
                        <Heart className={`w-5 h-5 ${theme.metricIcon1} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>主要訴求</p>
                          <p className={`text-sm ${theme.textMain} leading-snug`}>{project.appeal}</p>
                        </div>
                      </div>
                      <div className="flex items-start space-x-3">
                        <Clock className={`w-5 h-5 ${theme.metricIcon2} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>遊戲黏著度</p>
                          <p className={`text-sm font-bold ${theme.metricText3} leading-snug`}>{project.stickiness}</p>
                        </div>
                      </div>
                      <div className="flex items-start space-x-3">
                        <MousePointer2 className={`w-5 h-5 ${theme.metricIcon3} flex-shrink-0 mt-0.5`} />
                        <div>
                          <p className={`text-xs ${theme.textSub} uppercase font-semibold mb-0.5`}>特色功能</p>
                          <p className={`text-sm ${theme.textMain} leading-snug`}>{project.features}</p>
                        </div>
                      </div>
                    </>
                  )}
                </div>

              </div>
            </div>
          ))}
          
          {/* Add Project Placeholder (Visual Only) */}
          <div className={`border-2 border-dashed ${filter === 'tool' ? 'border-slate-800 text-slate-600 hover:border-slate-700 hover:text-slate-500' : 'border-[#2d1b4e] text-fuchsia-900/40 hover:border-fuchsia-900/60 hover:text-fuchsia-800/60'} rounded-xl flex flex-col items-center justify-center p-8 transition-colors cursor-default min-h-[400px]`}>
            <Code className="w-12 h-12 mb-4 opacity-50" />
            <p className="text-sm font-medium">Lab Experiment In Progress...</p>
          </div>

        </div>
      </main>

      <footer className={`${theme.headerBg} py-8 mt-12 border-t ${theme.headerBorder} text-center ${theme.textSub} text-sm transition-colors duration-500`}>
        <p>© {new Date().getFullYear()} Business Acceleration Lab. Built with React & Tailwind CSS.</p>
      </footer>
    </div>
  );
};

export default Portfolio;
